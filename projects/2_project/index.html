<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="yaQ3oNpMLBRXfSQqWpAJyTSIIEitvD3SJZGSu_mXc6U"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Predicting NBA player retention | Alex Pandya </title> <meta name="author" content="Alex Pandya"> <meta name="description" content="Computational astrophysicist "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://aapandy2.github.io/projects/2_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Alex</span> Pandya </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Predicting NBA player retention</h1> <p class="post-description"></p> </header> <article> <p><strong>Authors</strong>: Alex Pandya, Peter Johnson, Andrew Newman, Ryan Moruzzi, and Collin Litterell</p> <h3 id="background">Background</h3> <p>The NBA is widely considered to be the best basketball league in the world, and has grown over its seven-decade existence into a multibillion-dollar industry. Central to this industry is the problem of roster construction, as team performance depends critically on selecting productive players for all 15 roster spots.</p> <p>In this project, we aim to perform a novel analysis of NBA statistics, salary, and transaction data in order to determine whether or not a given player will be in the NBA in the next season (i.e., we predict NBA player retention). The resulting model has the potential to aid in the selection of players toward the end of the roster, which has long been one of the most challenging aspects of team construction.</p> <h3 id="data-collection-and-cleaning">Data collection and cleaning</h3> <p>Counting statistics data was collected from the official NBA site using an API and custom web scraping tools. Advanced statistics were collected from Kaggle. Transaction data and salary data were scraped from Basketball-Reference.com and hoopshype.com, respectively, using BeautifulSoup. The data was cleaned and missing data (e.g. missing salaries) were imputed. The data was split into a training set consisting of seasons 1990-91 through 2016-17 and a test set with seasons 2017-18 through 2022-23.</p> <h3 id="exploratory-data-analysis">Exploratory data analysis</h3> <p>We initially aimed to predict player transactions (whether a given player would be traded/waived), but this proved challenging due to weak correlations between statistics and transaction data (magnitude ~0.05). We found appreciable correlations with whether a player stayed in the NBA in the following season (NBA player retention), however; see the plot below.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nba_project_corr.webp" sizes="95vw"></source> <img src="/assets/img/nba_project_corr.webp" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Correlation heatmap" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Visualization of the correlation matrix for the statistics and transaction data. </div> <h3 id="modeling">Modeling</h3> <p>Predicting NBA player retention in the following season is a classification problem with time series structure and imbalanced classes. We evaluated 10 models using walk-forward cross validation with the balanced accuracy score as our central metric. Most models were trained on an augmented training set produced using the Synthetic Minority Oversampling Technique (SMOTE) to balance classes. The table below summarizes the cross-validation performance of each model on the training dataset.</p> <table> <thead> <tr> <th>Rank</th> <th>Model</th> <th>Balanced Accuracy</th> <th>Precision</th> <th>Recall (sensitivity)</th> <th>NPV</th> <th>Specificity</th> <th>Hyperparameters</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>XGBoost Classifier</td> <td>0.8132</td> <td>0.9455</td> <td>0.8318</td> <td>0.5244</td> <td>0.7947</td> <td><code class="language-plaintext highlighter-rouge">n_estimators=350, learning_rate=0.005</code></td> </tr> <tr> <td>2</td> <td>Random Forest Classifier</td> <td>0.8130</td> <td>0.9498</td> <td>0.8091</td> <td>0.4990</td> <td>0.8169</td> <td><code class="language-plaintext highlighter-rouge">max_depth=5, n_estimators=100</code></td> </tr> <tr> <td>3</td> <td>Logistic Regression w. SMOTE</td> <td>0.8122</td> <td>0.9593</td> <td>0.7631</td> <td>0.4582</td> <td>0.8613</td> <td><code class="language-plaintext highlighter-rouge">C=0.0005</code></td> </tr> <tr> <td>4</td> <td>AdaBoost Classifier</td> <td>0.8114</td> <td>0.9555</td> <td>0.7773</td> <td>0.4703</td> <td>0.8454</td> <td><code class="language-plaintext highlighter-rouge">learning_rate=0.1, n_estimators=100</code></td> </tr> <tr> <td>5</td> <td>PCA + QDA</td> <td>0.8107</td> <td>0.9560</td> <td>0.7747</td> <td>0.4671</td> <td>0.8468</td> <td> <code class="language-plaintext highlighter-rouge">pca__n_components=34</code>, <code class="language-plaintext highlighter-rouge">qda__reg_param=0.3</code> </td> </tr> <tr> <td>6</td> <td>LDA</td> <td>0.8091</td> <td>0.9566</td> <td>0.7683</td> <td>0.4604</td> <td>0.8498</td> <td><code class="language-plaintext highlighter-rouge">shrinkage=0.2</code></td> </tr> <tr> <td>7</td> <td>Gaussian Naive Bayes</td> <td>0.7953</td> <td>0.9658</td> <td>0.6970</td> <td>0.4075</td> <td>0.8937</td> <td><code class="language-plaintext highlighter-rouge">var_smoothing=0.01</code></td> </tr> <tr> <td>8</td> <td>PCA + KNN</td> <td>0.7932</td> <td>0.9593</td> <td>0.7172</td> <td>0.4169</td> <td>0.8692</td> <td><code class="language-plaintext highlighter-rouge">n_neighbors=28, n_components=28</code></td> </tr> <tr> <td>9</td> <td>Decision Tree Classifier</td> <td>0.7917</td> <td>0.9414</td> <td>0.7962</td> <td>0.4759</td> <td>0.7871</td> <td><code class="language-plaintext highlighter-rouge">criterion=gini, max_depth=5</code></td> </tr> <tr> <td>10</td> <td>Logistic Regression</td> <td>0.7370</td> <td>0.8967</td> <td>0.9430</td> <td>0.6850</td> <td>0.5310</td> <td><code class="language-plaintext highlighter-rouge">C=10.0</code></td> </tr> </tbody> </table> <p><br></p> <h3 id="calibration">Calibration</h3> <p>The best-performing model was calibrated using Platt scaling on a separate calibration set derived from the training data (but distinct from the data originally used to train the classifier). The uncalibrated model consistently underestimates the predicted probability of a player being retained; see the plot below.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nba_project_uncalibrated.webp" sizes="95vw"></source> <img src="/assets/img/nba_project_uncalibrated.webp" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Calibration curves for the uncalibrated model" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Probability calibration curves for the un-calibrated XGBoost model chosen by cross-validation. </div> <h3 id="final-model-performance">Final model performance</h3> <p>The best-performing model on the training set, XGBoost with SMOTE-augmented training data, was evaluated on the unseen test set consisting of data from seasons starting in 2017-2022. The performance of the model on these seasons is summarized in the table below.</p> <table> <thead> <tr> <th>Model</th> <th>Balanced accuracy</th> <th>Precision</th> <th>Recall</th> <th>NPV</th> <th>Specificity</th> <th>Uncalibrated Brier</th> <th>Calibrated Brier</th> </tr> </thead> <tbody> <tr> <td>Baseline</td> <td>0.5000</td> <td>0.7876</td> <td>1.0000</td> <td>0.0000</td> <td>0.0000</td> <td>0.2124</td> <td>0.1678</td> </tr> <tr> <td>Final model</td> <td>0.8044</td> <td>0.9455</td> <td>0.7780</td> <td>0.4985</td> <td>0.8308</td> <td>0.1463</td> <td>0.1132</td> </tr> </tbody> </table> <p><br></p> <p>The final chosen model significantly outperforms the baseline (which just always chooses the majority class, “Retained”) in balanced accuracy, precision, NPV, specificity, and the uncalibrated/calibrated Brier scores.</p> <p>Calibration of the final model (obtained using Platt scaling) is shown in the plot below.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nba_project_calibrated.webp" sizes="95vw"></source> <img src="/assets/img/nba_project_calibrated.webp" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Calibration curve for the calibrated model" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Probability calibration curve for the calibrated final XGBoost model. Calibration is performed using Platt scaling using a portion of the training data set aside explicitly for this purpose. </div> <h3 id="interactive-summary-site">Interactive summary site</h3> <p>An interactive summary site was created using the Python <code class="language-plaintext highlighter-rouge">streamlit</code> library, and can be found <a href="https://nbaplayerretention.streamlit.app/" rel="external nofollow noopener" target="_blank">here</a>.</p> <h2 id="future-directions">Future Directions</h2> <p>To build on our existing model, some additional data that we could incorporate include:</p> <ul> <li>contract terms,</li> <li>injury information,</li> <li>G-League data,</li> <li>and salary cap and Collective Bargaining Agreement (CBA) data. Additionally, we could expand our model of NBA players to incorporate other professional basketball leagues, for example the EuroLeague, and track movement across leagues. We could also expand the problem to focus on assigning probabilities that a player will be waived, traded, or not retained in the league at all, rather than pure classification.</li> </ul> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Alex Pandya. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>